//app.js
App({
  onLaunch: function () {
    // 展示本地存储能力
    var logs = wx.getStorageSync('logs') || []
    logs.unshift(Date.now())
    wx.setStorageSync('logs', logs)

    // 登录
    wx.login({
      success: res => {
        // 发送 res.code 到后台换取 openId, sessionKey, unionId
      }
    })
    // 获取用户信息
    wx.getSetting({
      success: res => {
        if (res.authSetting['scope.userInfo']) {
          // 已经授权，可以直接调用 getUserInfo 获取头像昵称，不会弹框
          wx.getUserInfo({
            success: res => {
              // 可以将 res 发送给后台解码出 unionId
              this.globalData.userInfo = res.userInfo

              // 由于 getUserInfo 是网络请求，可能会在 Page.onLoad 之后才返回
              // 所以此处加入 callback 以防止这种情况
              if (this.userInfoReadyCallback) {
                this.userInfoReadyCallback(res)
              }
            }
          })
        }
      }
    })
  },
  globalData: {
    userInfo: null,
    classTable: null,
    score: null,
    newsDetail: null,
    timeTable: { "1": ["2017-8-28", "2017-8-29", "2017-8-30", "2017-8-31", "2017-9-1", "2017-9-2", "2017-9-3"], "2": ["2017-9-4", "2017-9-5", "2017-9-6", "2017-9-7", "2017-9-8", "2017-9-9", "2017-9-10"], "3": ["2017-9-11", "2017-9-12", "2017-9-13", "2017-9-14", "2017-9-15", "2017-9-16", "2017-9-17"], "4": ["2017-9-18", "2017-9-19", "2017-9-20", "2017-9-21", "2017-9-22", "2017-9-23", "2017-9-24"], "5": ["2017-9-25", "2017-9-26", "2017-9-27", "2017-9-28", "2017-9-29", "2017-9-30", "2017-10-1"], "6": ["2017-10-2", "2017-10-3", "2017-10-4", "2017-10-5", "2017-10-6", "2017-10-7", "2017-10-8"], "7": ["2017-10-9", "2017-10-10", "2017-10-11", "2017-10-12", "2017-10-13", "2017-10-14", "2017-10-15"], "8": ["2017-10-16", "2017-10-17", "2017-10-18", "2017-10-19", "2017-10-20", "2017-10-21", "2017-10-22"], "9": ["2017-10-23", "2017-10-24", "2017-10-25", "2017-10-26", "2017-10-27", "2017-10-28", "2017-10-29"], "10": ["2017-10-30", "2017-10-31", "2017-11-1", "2017-11-2", "2017-11-3", "2017-11-4", "2017-11-5"], "11": ["2017-11-6", "2017-11-7", "2017-11-8", "2017-11-9", "2017-11-10", "2017-11-11", "2017-11-12"], "12": ["2017-11-13", "2017-11-14", "2017-11-15", "2017-11-16", "2017-11-17", "2017-11-18", "2017-11-19"], "13": ["2017-11-20", "2017-11-21", "2017-11-22", "2017-11-23", "2017-11-24", "2017-11-25", "2017-11-26"], "14": ["2017-11-27", "2017-11-28", "2017-11-29", "2017-11-30", "2017-12-1", "2017-12-2", "2017-12-3"], "15": ["2017-12-4", "2017-12-5", "2017-12-6", "2017-12-7", "2017-12-8", "2017-12-9", "2017-12-10"], "16": ["2017-12-11", "2017-12-12", "2017-12-13", "2017-12-14", "2017-12-15", "2017-12-16", "2017-12-17"], "17": ["2017-12-18", "2017-12-19", "2017-12-20", "2017-12-21", "2017-12-22", "2017-12-23", "2017-12-24"], "18": ["2017-12-25", "2017-12-26", "2017-12-27", "2017-12-28", "2017-12-29", "2017-12-30", "2017-12-31"], "19": ["2018-1-1", "2018-1-2", "2018-1-3", "2018-1-4", "2018-1-5", "2018-1-6", "2018-1-7"], "20": ["2018-1-8", "2018-1-9", "2018-1-10", "2018-1-11", "2018-1-12", "2018-1-13", "2018-1-14"], "21": ["2018-1-15", "2018-1-16", "2018-1-17", "2018-1-18", "2018-1-19", "2018-1-20", "2018-1-21"], "22": ["2018-1-22", "2018-1-23", "2018-1-24", "2018-1-25", "2018-1-26"] }
  }
});